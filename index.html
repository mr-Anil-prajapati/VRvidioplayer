<!DOCTYPE html>
<html>
<head>
<title>Video Browser</title>

<style>
body{
    background:#111;
    color:white;
    font-family:Arial;
    text-align:center;
}

#list button{
    display:block;
    width:80%;
    margin:5px auto;
    padding:10px;
    background:#222;
    color:white;
    border:none;
    cursor:pointer;
}
video{
    width:80%;
    margin-top:20px;
}
</style>
</head>

<body>

<h2>Simple Video Server Player</h2>

Server URL:
<input id="server" value="http://172.21.127.70:8000/">
<button onclick="loadVideos()">Load Videos</button>

<div id="list"></div>

<video id="player" controls></video>

<script>

async function loadVideos(){

    let server = document.getElementById("server").value;

    let response = await fetch(server);
    let text = await response.text();

    // find mp4 files from directory listing
    let matches = text.match(/href="([^"]+\.mp4)"/g);

    let listDiv = document.getElementById("list");
    listDiv.innerHTML="";

    if(matches){
        matches.forEach(item => {

            let file = item.replace('href="','').replace('"','');

            let btn = document.createElement("button");
            btn.innerText = file;

            btn.onclick = function(){
                document.getElementById("player").src = server + file;
            }

            listDiv.appendChild(btn);

        });
    }
}

</script>

</body>
</html>
